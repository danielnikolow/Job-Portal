<!-- –ù–æ–≤–∞ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∞ search —Ñ–æ—Ä–º–∞ -->
<form class="job-search-form" id="jobSearchForm" method="get">
    <div class="search-wrapper">
        <div class="search-header-section">
            <div class="search-title-block">
                <span class="search-badge-new">üîç –ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ</span>
                <h2 class="search-heading">–ù–∞–º–µ—Ä–∏ –ø–µ—Ä—Ñ–µ–∫—Ç–Ω–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è</h2>
                <p class="search-description">–§–∏–ª—Ç—Ä–∏—Ä–∞–π –æ–±—è–≤–∏—Ç–µ –ø–æ –∫–ª—é—á–æ–≤–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏ –ø–æ–ª—É—á–∏ –Ω–∞–π-–ø–æ–¥—Ö–æ–¥—è—â–∏—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –∑–∞ —Ç–≤–æ—è—Ç–∞ –∫–∞—Ä–∏–µ—Ä–∞.</p>
            </div>
            <div class="search-control-buttons">
                <button type="button" class="btn-control btn-clear" id="btnClearForm">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12a9 9 0 1 0 9-9"/>
                        <path d="M3 3v6h6"/>
                    </svg>
                    <span>–ò–∑—á–∏—Å—Ç–∏</span>
                </button>
                <button type="button" class="btn-control btn-filters" id="btnToggleFilters" aria-expanded="false">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 5h18"/>
                        <path d="M7 10h10"/>
                        <path d="M11 15h2"/>
                        <path d="M13 20L19 12"/>
                        <path d="M11 20L5 12"/>
                    </svg>
                    <span>–†–∞–∑—à–∏—Ä–µ–Ω–∏ —Ñ–∏–ª—Ç—Ä–∏</span>
                </button>
            </div>
        </div>

        <div class="search-fields-grid">
            <div class="form-group">
                <label class="form-label" for="searchKeyword">–ü–æ–∑–∏—Ü–∏—è / –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞</label>
                <div class="input-wrapper">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 21l-4.35-4.35"/>
                        <circle cx="11" cy="11" r="7"/>
                    </svg>
                    <input type="text" 
                           id="searchKeyword" 
                           name="keyword" 
                           class="form-input" 
                           placeholder="–ü—Ä–∏–º–µ—Ä: Java Developer, Python..."
                           autocomplete="off">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="searchLocation">–õ–æ–∫–∞—Ü–∏—è</label>
                <div class="input-wrapper">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10a9 9 0 1 0-18 0c0 5 9 12 9 12s9-7 9-12z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    <input type="text" 
                           id="searchLocation" 
                           name="location" 
                           class="form-input" 
                           placeholder="–°–æ—Ñ–∏—è, –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ, –ü–ª–æ–≤–¥–∏–≤..."
                           autocomplete="off">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="searchJobType">–¢–∏–ø –∑–∞–µ—Ç–æ—Å—Ç</label>
                <div class="input-wrapper">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 7h18"/>
                        <path d="M5 7v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7"/>
                        <path d="M9 7V5a3 3 0 0 1 6 0v2"/>
                    </svg>
                    <select id="searchJobType" name="jobType" class="form-input form-select">
                        <option value="">–í—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ</option>
                        <option value="FULL_TIME">–ü—ä–ª–µ–Ω –¥–µ–Ω</option>
                        <option value="PART_TIME">–ù–µ–ø—ä–ª–µ–Ω –¥–µ–Ω</option>
                        <option value="CONTRACT">–î–æ–≥–æ–≤–æ—Ä</option>
                        <option value="REMOTE">–î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ</option>
                    </select>
                </div>
            </div>

            <div class="form-group form-group-submit">
                <button type="button" class="btn-search-primary" id="btnSearchSubmit">
                    <span>–¢—ä—Ä—Å–∏</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="advanced-filters-section" id="advancedFiltersSection">
            <div class="advanced-filters-grid">
                <div class="form-group">
                    <label class="form-label" for="searchExperience">–ù–∏–≤–æ –æ–ø–∏—Ç</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M7 20h10"/>
                            <path d="M12 14v6"/>
                            <path d="M9 11l3-3 3 3"/>
                            <path d="M12 4v4"/>
                        </svg>
                        <select id="searchExperience" name="experienceLevel" class="form-input form-select">
                            <option value="">–í—Å–∏—á–∫–∏ –Ω–∏–≤–∞</option>
                            <option value="INTERN">–°—Ç–∞–∂–∞–Ω—Ç</option>
                            <option value="JUNIOR">Junior</option>
                            <option value="MID">Mid</option>
                            <option value="SENIOR">Senior</option>
                            <option value="LEAD">Lead</option>
                        </select>
                    </div>
                </div>

                <div class="form-group form-group-range">
                    <label class="form-label">–ú–µ—Å–µ—á–Ω–∞ –∑–∞–ø–ª–∞—Ç–∞ (–ª–≤.)</label>
                    <div class="range-inputs">
                        <div class="input-wrapper input-wrapper-range">
                            <span class="range-label">–æ—Ç</span>
                            <input type="number" 
                                   id="searchSalaryMin" 
                                   name="salaryMin" 
                                   class="form-input form-input-range" 
                                   min="0" 
                                   step="100" 
                                   placeholder="2000">
                        </div>
                        <div class="input-wrapper input-wrapper-range">
                            <span class="range-label">–¥–æ</span>
                            <input type="number" 
                                   id="searchSalaryMax" 
                                   name="salaryMax" 
                                   class="form-input form-input-range" 
                                   min="0" 
                                   step="100" 
                                   placeholder="6000">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="searchPostedWithin">–ü—É–±–ª–∏–∫—É–≤–∞–Ω–∞</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="9"/>
                            <path d="M12 7v5l3 3"/>
                        </svg>
                        <select id="searchPostedWithin" name="postedWithin" class="form-input form-select">
                            <option value="">–ë–µ–∑ –∑–Ω–∞—á–µ–Ω–∏–µ</option>
                            <option value="1">–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 24 —á–∞—Å–∞</option>
                            <option value="3">–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 3 –¥–Ω–∏</option>
                            <option value="7">–ü–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ —Å–µ–¥–º–∏—Ü–∞</option>
                            <option value="14">–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 2 —Å–µ–¥–º–∏—Ü–∏</option>
                            <option value="30">–ü–æ—Å–ª–µ–¥–Ω–∏—è –º–µ—Å–µ—Ü</option>
                        </select>
                    </div>
                </div>

                <div class="form-group form-group-toggle">
                    <label class="form-label">–†–∞–±–æ—Ç–∞</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="searchRemoteOnly" name="remoteOnly" value="true">
                        <span class="toggle-slider"></span>
                        <span class="toggle-label">–°–∞–º–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–∏ –ø–æ–∑–∏—Ü–∏–∏</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="search-suggestions" th:if="${suggestedTags}">
            <span class="suggestions-label">–ü–æ–ø—É–ª—è—Ä–Ω–∏ —Ç—ä—Ä—Å–µ–Ω–∏—è:</span>
            <div class="suggestions-tags">
                <a class="suggestion-tag" th:each="t : ${suggestedTags}" th:text="${t}" th:href="@{/jobs/search(keyword=${t})}">Java</a>
            </div>
        </div>
    </div>
</form>

<script>
(function() {
    'use strict';
    
    // Wait for DOM to be ready
    function ready(fn) {
        if (document.readyState !== 'loading') {
            fn();
        } else {
            document.addEventListener('DOMContentLoaded', fn);
        }
    }
    
    ready(function() {
        var form = document.getElementById('jobSearchForm');
        var btnClear = document.getElementById('btnClearForm');
        var btnToggleFilters = document.getElementById('btnToggleFilters');
        var btnSearch = document.getElementById('btnSearchSubmit');
        var advancedSection = document.getElementById('advancedFiltersSection');
        
        if (!form || !btnClear || !btnToggleFilters || !btnSearch || !advancedSection) {
            console.error('Search form elements not found');
            return;
        }
        
        // Toggle advanced filters
        btnToggleFilters.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            var isOpen = advancedSection.classList.contains('is-open');
            if (isOpen) {
                advancedSection.classList.remove('is-open');
                btnToggleFilters.setAttribute('aria-expanded', 'false');
                btnToggleFilters.classList.remove('is-active');
            } else {
                advancedSection.classList.add('is-open');
                btnToggleFilters.setAttribute('aria-expanded', 'true');
                btnToggleFilters.classList.add('is-active');
            }
        });
        
        // Clear form
        btnClear.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            form.reset();
            
            // Close advanced filters if open
            if (advancedSection.classList.contains('is-open')) {
                advancedSection.classList.remove('is-open');
                btnToggleFilters.setAttribute('aria-expanded', 'false');
                btnToggleFilters.classList.remove('is-active');
            }
        });
        
        // Search submit
        btnSearch.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            performSearch();
        });
        
        // Also handle form submit (Enter key)
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            performSearch();
        });
        
        function performSearch() {
            var keyword = document.getElementById('searchKeyword').value.trim();
            var location = document.getElementById('searchLocation').value.trim();
            var jobType = document.getElementById('searchJobType').value;
            var experienceLevel = document.getElementById('searchExperience').value;
            var salaryMin = document.getElementById('searchSalaryMin').value.trim();
            var salaryMax = document.getElementById('searchSalaryMax').value.trim();
            var postedWithin = document.getElementById('searchPostedWithin').value;
            var remoteOnly = document.getElementById('searchRemoteOnly').checked ? 'true' : '';
            
            var params = [];
            if (keyword) params.push('keyword=' + encodeURIComponent(keyword));
            if (location) params.push('location=' + encodeURIComponent(location));
            if (jobType) params.push('jobType=' + encodeURIComponent(jobType));
            if (experienceLevel) params.push('experienceLevel=' + encodeURIComponent(experienceLevel));
            if (salaryMin) params.push('salaryMin=' + encodeURIComponent(salaryMin));
            if (salaryMax) params.push('salaryMax=' + encodeURIComponent(salaryMax));
            if (postedWithin) params.push('postedWithin=' + encodeURIComponent(postedWithin));
            if (remoteOnly) params.push('remoteOnly=' + encodeURIComponent(remoteOnly));
            
            var url = '/jobs/search';
            if (params.length > 0) {
                url += '?' + params.join('&');
            }
            
            window.location.href = url;
        }
    });
})();
</script>

