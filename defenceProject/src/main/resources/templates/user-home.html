<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–ú–æ—è—Ç –¥–æ–º ‚Äì –ü–æ—Å–ª–µ–¥–Ω–∏ –æ–±—è–≤–∏ | JobPortal</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/user-home.css}">
    <link rel="stylesheet" th:href="@{/css/user-search-form-new.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
          rel="stylesheet">
</head>
<body class="user-home-page">
<header class="user-hero">
    <div class="user-hero-bg">
        <div class="bg-glow glow-1"></div>
        <div class="bg-glow glow-2"></div>
        <div class="mesh-overlay"></div>
    </div>
    <div class="container">
        <div class="user-hero-content">
            <div class="user-identity">
                <div class="hello">
                    <p class="greeting">–ó–¥—Ä–∞–≤–µ–π,</p>
                    <h1 class="username" th:text="${user.username}">–ö–∞–Ω–¥–∏–¥–∞—Ç</h1>
                </div>
            </div>
<!--            <div class="quick-stats" th:if="${userStats}">-->
<!--                <div class="qstat">-->
<!--                    <div class="qstat-value" th:text="${userStats.savedJobs}">0</div>-->
<!--                    <div class="qstat-label">–ó–∞–ø–∞–∑–µ–Ω–∏</div>-->
<!--                </div>-->
<!--                <div class="qstat">-->
<!--                    <div class="qstat-value" th:text="${userStats.applied}">0</div>-->
<!--                    <div class="qstat-label">–ö–∞–Ω–¥–∏–¥–∞—Ç—É—Ä–∏</div>-->
<!--                </div>-->
<!--                <div class="qstat">-->
<!--                    <div class="qstat-value" th:text="${userStats.matches}">0</div>-->
<!--                    <div class="qstat-label">–°—ä–≤–ø–∞–¥–µ–Ω–∏—è</div>-->
<!--                </div>-->
<!--            </div>-->
            <div class="profile-menu-wrapper" th:if="${user != null}">
                <button type="button"
                        class="profile-trigger"
                        id="profileTrigger"
                        aria-haspopup="true"
                        aria-expanded="false"
                        aria-label="–û—Ç–≤–æ—Ä–∏ –º–µ–Ω—é –∑–∞ –ø—Ä–æ—Ñ–∏–ª">
                    <span class="trigger-avatar">
                        <img th:if="${user.avatar != null}"
                             th:src="${user.avatar}"
                             alt="–ê–≤–∞—Ç–∞—Ä –Ω–∞ ${user.username}">
                        <span class="avatar-fallback"
                              th:if="${user.avatar == null}"
                              th:text="${user.username != null ? user.username.substring(0,1).toUpperCase() : 'U'}">U</span>
                    </span>
                    <span class="trigger-info">
                        <span class="trigger-label">–ü—Ä–æ—Ñ–∏–ª</span>
<!--                        <span class="trigger-username" th:text="${user.username}">–ö–∞–Ω–¥–∏–¥–∞—Ç</span>-->
                    </span>
                    <svg class="trigger-caret"
                         xmlns="http://www.w3.org/2000/svg"
                         viewBox="0 0 24 24"
                         aria-hidden="true"
                         focusable="false">
                        <path d="M6 9l6 6 6-6"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2.5"
                              stroke-linecap="round"
                              stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="profile-dropdown" id="profileDropdown" role="menu" aria-labelledby="profileTrigger">
<!--                    <div class="profile-header">-->
<!--                        <div class="ph-avatar">-->
<!--                            <img th:if="${user.avatar != null}" th:src="${user.avatar}" alt="–ê–≤–∞—Ç–∞—Ä">-->
<!--                            <span th:if="${user.avatar == null}"-->
<!--                                  th:text="${user.username != null ? user.username.substring(0,1) : 'U'}">U</span>-->
<!--                        </div>-->
                        <!--                        <div class="ph-info">-->
                        <!--                            <div class="ph-name" th:text="${user.fullName}">–ö–∞–Ω–¥–∏–¥–∞—Ç</div>-->
                        <!--                            <div class="ph-email" th:text="${user.email}">user@mail.com</div>-->
                        <!--                        </div>-->
<!--                    </div>-->
                    <a class="profile-item" th:href="@{/account}" role="menuitem">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm7 9a7 7 0 0 0-14 0"/>
                        </svg>
                        <span>–ê–∫–∞—É–Ω—Ç</span>
                    </a>
                        <a class="profile-item" th:href="@{/recruiter/jobs/new}" th:if="${#strings.equals(user.role.name(), 'RECRUITER')}" role="menuitem">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M20 7h-4V6a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v1H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Zm-10-1h4v1h-4V6Z"/>
                        </svg>
                        <span>–°—ä–∑–¥–∞–π —Ä–∞–±–æ—Ç–∞</span>
                    </a>
                    <a class="profile-item" th:href="@{/recruiter-applications}" th:if="${#strings.equals(user.role.name(), 'RECRUITER')}" role="menuitem">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M20 7h-4V6a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v1H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Zm-10-1h4v1h-4V6Z"/>
                        </svg>
                        <span>–ö–∞–Ω–¥–∏–¥–∞—Ç—É—Ä–∏</span>
                    </a>
                    <a class="profile-item" th:href="@{/user-applications}" th:if="${#strings.equals(user.role.name(), 'USER')}" role="menuitem">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M20 7h-4V6a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v1H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Zm-10-1h4v1h-4V6Z"/>
                        </svg>
                        <span>–ö–∞–Ω–¥–∏–¥–∞—Ç—É—Ä–∏</span>
                    </a>
<!--                    <a class="profile-item" th:href="@{/account(tab='tab-security')}" role="menuitem">-->
<!--                        <svg viewBox="0 0 24 24" aria-hidden="true">-->
<!--                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10Z" fill="none" stroke="currentColor"-->
<!--                                  stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>-->
<!--                        </svg>-->
<!--                        <span>–°–∏–≥—É—Ä–Ω–æ—Å—Ç</span>-->
<!--                    </a>-->
<!--                    <a class="profile-item" th:href="@{/account(tab='tab-preferences')}" th:if="${#strings.equals(user.role.name(), 'USER')}" role="menuitem">-->
<!--                        <svg viewBox="0 0 24 24" aria-hidden="true">-->
<!--                            <path d="M12 6v12M6 12h12" fill="none" stroke="currentColor" stroke-width="2"-->
<!--                                  stroke-linecap="round" stroke-linejoin="round"/>-->
<!--                        </svg>-->
<!--                        <span>–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–Ω–∏—è</span>-->
<!--                    </a>-->
                    <a class="profile-item" th:if="${#strings.equals(user.role.name(), 'USER')}" th:href="@{/create-cv}" role="menuitem">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M12 6v12M6 12h12" fill="none" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>–°—ä–∑–¥–∞–π CV</span>
                    </a>
                    <a class="profile-item" th:if="${#strings.equals(user.role.name(), 'USER')}" th:href="@{/job-alerts}" role="menuitem">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span>Job Alerts</span>
                    </a>
                    <a class="profile-item" th:if="${#strings.equals(user.role.name(), 'USER')}" th:href="@{/job-alerts/notifications}" role="menuitem">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span>Notification</span>
                    </a>
                    <form th:action="@{/logout}" method="post" class="profile-item as-form" role="none">
                        <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}">
                        <button type="submit">
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/>
                            </svg>
                            <span>–ò–∑—Ö–æ–¥</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <form class="job-search-form" id="jobSearchForm" method="get">
            <div class="search-wrapper">
                <div class="search-header-section">
                    <div class="search-title-block">
                        <span class="search-badge-new">üîç –ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ</span>
                        <h2 class="search-heading">–ù–∞–º–µ—Ä–∏ –ø–µ—Ä—Ñ–µ–∫—Ç–Ω–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è</h2>
                        <p class="search-description">–§–∏–ª—Ç—Ä–∏—Ä–∞–π –æ–±—è–≤–∏—Ç–µ –ø–æ –∫–ª—é—á–æ–≤–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏ –ø–æ–ª—É—á–∏ –Ω–∞–π-–ø–æ–¥—Ö–æ–¥—è—â–∏—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –∑–∞ —Ç–≤–æ—è—Ç–∞ –∫–∞—Ä–∏–µ—Ä–∞.</p>
                    </div>
                    <div class="search-control-buttons">
                        <button type="button" class="btn-control btn-clear" id="btnClearForm">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 12a9 9 0 1 0 9-9"/>
                                <path d="M3 3v6h6"/>
                            </svg>
                            <span>–ò–∑—á–∏—Å—Ç–∏</span>
                        </button>
                        <button type="button" class="btn-control btn-filters" id="btnToggleFilters" aria-expanded="false">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 5h18"/>
                                <path d="M7 10h10"/>
                                <path d="M11 15h2"/>
                                <path d="M13 20L19 12"/>
                                <path d="M11 20L5 12"/>
                            </svg>
                            <span>–†–∞–∑—à–∏—Ä–µ–Ω–∏ —Ñ–∏–ª—Ç—Ä–∏</span>
                        </button>
                    </div>
                </div>

                <div class="search-fields-grid">
                    <div class="form-group">
                        <label class="form-label" for="searchKeyword">–ü–æ–∑–∏—Ü–∏—è / –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞</label>
                        <div class="input-wrapper">
                            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 21l-4.35-4.35"/>
                                <circle cx="11" cy="11" r="7"/>
                            </svg>
                            <input type="text" 
                                   id="searchKeyword" 
                                   name="keyword" 
                                   class="form-input" 
                                   placeholder="–ü—Ä–∏–º–µ—Ä: Java Developer, Python..."
                                   autocomplete="off">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="searchLocation">–õ–æ–∫–∞—Ü–∏—è</label>
                        <div class="input-wrapper">
                            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10a9 9 0 1 0-18 0c0 5 9 12 9 12s9-7 9-12z"/>
                                <circle cx="12" cy="10" r="3"/>
                            </svg>
                            <input type="text" 
                                   id="searchLocation" 
                                   name="location" 
                                   class="form-input" 
                                   placeholder="–°–æ—Ñ–∏—è, –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ, –ü–ª–æ–≤–¥–∏–≤..."
                                   autocomplete="off">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="searchJobType">–¢–∏–ø –∑–∞–µ—Ç–æ—Å—Ç</label>
                        <div class="input-wrapper">
                            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 7h18"/>
                                <path d="M5 7v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7"/>
                                <path d="M9 7V5a3 3 0 0 1 6 0v2"/>
                            </svg>
                            <select id="searchJobType" name="jobType" class="form-input form-select">
                                <option value="">–í—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ</option>
                                <option value="FULL_TIME">–ü—ä–ª–µ–Ω –¥–µ–Ω</option>
                                <option value="PART_TIME">–ù–µ–ø—ä–ª–µ–Ω –¥–µ–Ω</option>
                                <option value="CONTRACT">–î–æ–≥–æ–≤–æ—Ä</option>
                                <option value="REMOTE">–î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group form-group-submit">
                        <button type="button" class="btn-search-primary" id="btnSearchSubmit">
                            <span>–¢—ä—Ä—Å–∏</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"/>
                                <path d="m21 21-4.35-4.35"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="advanced-filters-section" id="advancedFiltersSection">
                    <div class="advanced-filters-grid">
                        <div class="form-group">
                            <label class="form-label" for="searchExperience">–ù–∏–≤–æ –æ–ø–∏—Ç</label>
                            <div class="input-wrapper">
                                <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M7 20h10"/>
                                    <path d="M12 14v6"/>
                                    <path d="M9 11l3-3 3 3"/>
                                    <path d="M12 4v4"/>
                                </svg>
                                <select id="searchExperience" name="experienceLevel" class="form-input form-select">
                                    <option value="">–í—Å–∏—á–∫–∏ –Ω–∏–≤–∞</option>
                                    <option value="INTERN">–°—Ç–∞–∂–∞–Ω—Ç</option>
                                    <option value="JUNIOR">Junior</option>
                                    <option value="MID">Mid</option>
                                    <option value="SENIOR">Senior</option>
                                    <option value="LEAD">Lead</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group form-group-range">
                            <label class="form-label">–ú–µ—Å–µ—á–Ω–∞ –∑–∞–ø–ª–∞—Ç–∞ (–ª–≤.)</label>
                            <div class="range-inputs">
                                <div class="input-wrapper input-wrapper-range">
                                    <span class="range-label">–æ—Ç</span>
                                    <input type="number" 
                                           id="searchSalaryMin" 
                                           name="salaryMin" 
                                           class="form-input form-input-range" 
                                           min="0" 
                                           step="100" 
                                           placeholder="2000">
                                </div>
                                <div class="input-wrapper input-wrapper-range">
                                    <span class="range-label">–¥–æ</span>
                                    <input type="number" 
                                           id="searchSalaryMax" 
                                           name="salaryMax" 
                                           class="form-input form-input-range" 
                                           min="0" 
                                           step="100" 
                                           placeholder="6000">
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="searchPostedWithin">–ü—É–±–ª–∏–∫—É–≤–∞–Ω–∞</label>
                            <div class="input-wrapper">
                                <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="9"/>
                                    <path d="M12 7v5l3 3"/>
                                </svg>
                                <select id="searchPostedWithin" name="postedWithin" class="form-input form-select">
                                    <option value="">–ë–µ–∑ –∑–Ω–∞—á–µ–Ω–∏–µ</option>
                                    <option value="1">–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 24 —á–∞—Å–∞</option>
                                    <option value="3">–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 3 –¥–Ω–∏</option>
                                    <option value="7">–ü–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ —Å–µ–¥–º–∏—Ü–∞</option>
                                    <option value="14">–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 2 —Å–µ–¥–º–∏—Ü–∏</option>
                                    <option value="30">–ü–æ—Å–ª–µ–¥–Ω–∏—è –º–µ—Å–µ—Ü</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group form-group-toggle">
                            <label class="form-label">–†–∞–±–æ—Ç–∞</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="searchRemoteOnly" name="remoteOnly" value="true">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">–°–∞–º–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–∏ –ø–æ–∑–∏—Ü–∏–∏</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="search-suggestions" th:if="${suggestedTags}">
                    <span class="suggestions-label">–ü–æ–ø—É–ª—è—Ä–Ω–∏ —Ç—ä—Ä—Å–µ–Ω–∏—è:</span>
                    <div class="suggestions-tags">
                        <a class="suggestion-tag" th:each="t : ${suggestedTags}" th:text="${t}" th:href="@{/jobs/search(keyword=${t})}">Java</a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</header>

<main class="user-home-main">
    <div class="container">
        <div class="section-head">
            <div>
                <span class="badge">–ù–æ–≤–æ</span>
                <h2>–ü–æ—Å–ª–µ–¥–Ω–æ –¥–æ–±–∞–≤–µ–Ω–∏ –æ–±—è–≤–∏</h2>
                <p class="sub">–ê–∫—Ç—É–∞–ª–Ω–∏ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –ø–æ–¥—Ä–µ–¥–µ–Ω–∏ –ø–æ –¥–∞—Ç–∞ –Ω–∞ –ø—É–±–ª–∏–∫—É–≤–∞–Ω–µ</p>
            </div>
            <a th:href="@{/user-home}" class="view-all">–í–∏–∂ –≤—Å–∏—á–∫–∏ ‚Üí</a>
        </div>

        <div class="feed-grid">
            <article class="job-tile" th:each="job : ${latestJobs}">
                <div class="tile-head">
                    <div class="brand">
                        <!--                        <div class="brand-logo" th:if="${job.company.logo}">-->
                        <!--                            <img th:src="${job.company.logo}" alt="Logo">-->
                        <!--                        </div>-->
                        <div class="brand-logo placeholder" th:if="${job.company == null}">
                            <span th:text="${job.company.substring(0,1)}">C</span>
                        </div>
                        <div class="brand-text">
                            <h3 class="job-title"><a th:href="@{/details/{id}(id=${job.id})}" th:text="${job.title}">Job
                                title</a></h3>
                            <p class="company" th:text="${job.company}">Company</p>
                        </div>
                    </div>
                    <button class="save" title="–ó–∞–ø–∞–∑–∏">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2">
                            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </button>
                </div>
                <div class="tile-meta">
            <span class="meta">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2"><path
                      d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
              <span th:text="${job.location}">–°–æ—Ñ–∏—è</span>
            </span>
                    <span class="meta type" th:text="${job.employmentType}">Full-time</span>
                    <span class="meta posted">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline
                      points="12 6 12 12 16 14"></polyline></svg>
              <span th:text="${job.postedOn}">–ü—Ä–µ–¥–∏ 2 –¥–Ω–∏</span>
            </span>
                </div>
                <p class="tile-desc" th:text="${job.summary}">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ç–∞...</p>
                <!--                <div class="tile-tags" th:if="${job.tags}">-->
                <!--                    <span class="tag" th:each="tag : ${job.tags}" th:text="${tag}">Java</span>-->
                <!--                </div>-->
                <div class="tile-foot">
<!--                    <div class="salary" th:text="${job.salaryMax}">5 000 - 7 000 –ª–≤.</div>-->
                    <a th:href="@{/job/{id}(id=${job.id})}" class="btn-outline">–ö–∞–Ω–¥–∏–¥–∞—Ç—Å—Ç–≤–∞–π</a>
                </div>
            </article>
        </div>

        <div class="empty" th:if="${latestJobs == null || #lists.isEmpty(latestJobs)}">
            <div class="empty-card">
                <div class="empty-icon">üîé</div>
                <h3>–ù—è–º–∞ –Ω–æ–≤–∏ –æ–±—è–≤–∏</h3>
                <p>–ê–±–æ–Ω–∏—Ä–∞–π —Å–µ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è –∏–ª–∏ –ø—Ä–µ–≥–ª–µ–¥–∞–π –≤—Å–∏—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.</p>
                <div class="empty-actions">
                    <a th:href="@{/jobs}" class="btn-secondary">–†–∞–∑–≥–ª–µ–¥–∞–π –≤—Å–∏—á–∫–∏</a>
                    <a th:href="@{/alerts}" class="btn-primary">–ê–∫—Ç–∏–≤–∏—Ä–∞–π –∏–∑–≤–µ—Å—Ç–∏—è</a>
                </div>
            </div>
        </div>

<!--        <div class="section-head mt">-->
<!--            <div>-->
<!--                <span class="badge alt">–ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–æ –∑–∞ —Ç–µ–±</span>-->
<!--                <h2>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–ø–æ—Ä–µ–¥ –ø—Ä–æ—Ñ–∏–ª–∞</h2>-->
<!--                <p class="sub">–ë–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ —Ç–≤–æ–∏—Ç–µ —É–º–µ–Ω–∏—è –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç</p>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="recommendations" th:if="${recommendedJobs}">-->
<!--            <a class="pill" th:each="r : ${recommendedJobs}" th:href="@{/jobs/{id}(id=${r.id})}">-->
<!--                <span class="pill-title" th:text="${r.title}">Backend Engineer</span>-->
<!--                <span class="pill-sub" th:text="${r.company.name}">Acme</span>-->
<!--            </a>-->
    </div>
</main>
<script>
(function() {
    'use strict';
    
    // Force page reload when user navigates back (prevents showing cached version)
    window.addEventListener('pageshow', function(event) {
        if (event.persisted) {
            // Page was loaded from cache (back/forward button)
            window.location.reload();
        }
    });
    
    // Wait for DOM to be ready
    function ready(fn) {
        if (document.readyState !== 'loading') {
            fn();
        } else {
            document.addEventListener('DOMContentLoaded', fn);
        }
    }
    
    ready(function() {
        var form = document.getElementById('jobSearchForm');
        var btnClear = document.getElementById('btnClearForm');
        var btnToggleFilters = document.getElementById('btnToggleFilters');
        var btnSearch = document.getElementById('btnSearchSubmit');
        var advancedSection = document.getElementById('advancedFiltersSection');
        
        if (!form || !btnClear || !btnToggleFilters || !btnSearch || !advancedSection) {
            console.error('Search form elements not found');
            return;
        }
        
        // Toggle advanced filters
        btnToggleFilters.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            var isOpen = advancedSection.classList.contains('is-open');
            if (isOpen) {
                advancedSection.classList.remove('is-open');
                btnToggleFilters.setAttribute('aria-expanded', 'false');
                btnToggleFilters.classList.remove('is-active');
            } else {
                advancedSection.classList.add('is-open');
                btnToggleFilters.setAttribute('aria-expanded', 'true');
                btnToggleFilters.classList.add('is-active');
            }
        });
        
        // Clear form
        btnClear.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            form.reset();
            
            // Close advanced filters if open
            if (advancedSection.classList.contains('is-open')) {
                advancedSection.classList.remove('is-open');
                btnToggleFilters.setAttribute('aria-expanded', 'false');
                btnToggleFilters.classList.remove('is-active');
            }
        });
        
        // Search submit
        btnSearch.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            performSearch();
        });
        
        // Also handle form submit (Enter key)
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            performSearch();
        });
        
        function performSearch() {
            var keyword = document.getElementById('searchKeyword').value.trim();
            var location = document.getElementById('searchLocation').value.trim();
            var jobType = document.getElementById('searchJobType').value;
            var experienceLevel = document.getElementById('searchExperience').value;
            var salaryMin = document.getElementById('searchSalaryMin').value.trim();
            var salaryMax = document.getElementById('searchSalaryMax').value.trim();
            var postedWithin = document.getElementById('searchPostedWithin').value;
            var remoteOnly = document.getElementById('searchRemoteOnly').checked ? 'true' : '';
            
            var params = [];
            if (keyword) params.push('keyword=' + encodeURIComponent(keyword));
            if (location) params.push('location=' + encodeURIComponent(location));
            if (jobType) params.push('jobType=' + encodeURIComponent(jobType));
            if (experienceLevel) params.push('experienceLevel=' + encodeURIComponent(experienceLevel));
            if (salaryMin) params.push('salaryMin=' + encodeURIComponent(salaryMin));
            if (salaryMax) params.push('salaryMax=' + encodeURIComponent(salaryMax));
            if (postedWithin) params.push('postedWithin=' + encodeURIComponent(postedWithin));
            if (remoteOnly) params.push('remoteOnly=' + encodeURIComponent(remoteOnly));
            
            var url = '/jobs/search';
            if (params.length > 0) {
                url += '?' + params.join('&');
            }
            
            window.location.href = url;
        }
    });

    // Profile menu
    document.addEventListener('DOMContentLoaded', function() {
        const profileTrigger = document.getElementById('profileTrigger');
        const profileDropdown = document.getElementById('profileDropdown');
        if (profileTrigger && profileDropdown) {
            const setMenuState = (isOpen) => {
                profileDropdown.classList.toggle('is-open', isOpen);
                profileTrigger.setAttribute('aria-expanded', String(isOpen));
            };

            profileTrigger.addEventListener('click', (event) => {
                event.stopPropagation();
                const shouldOpen = !profileDropdown.classList.contains('is-open');
                setMenuState(shouldOpen);
            });

            profileDropdown.addEventListener('click', (event) => {
                event.stopPropagation();
            });

            document.addEventListener('click', () => {
                if (profileDropdown.classList.contains('is-open')) {
                    setMenuState(false);
                }
            });

            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && profileDropdown.classList.contains('is-open')) {
                    setMenuState(false);
                    profileTrigger.focus();
                }
            });
        }

        // Small reveal animation on scroll
        const io = new IntersectionObserver((entries)=>{
            entries.forEach(e=>{
                if(e.isIntersecting){
                    e.target.classList.add('reveal');
                    io.unobserve(e.target);
                }
            });
        }, {
            threshold: 0.01,
            rootMargin: '0px 0px -50px 0px'
        });
        
        const elementsToObserve = document.querySelectorAll('.job-tile, .empty-card, .pill');
        elementsToObserve.forEach(el => {
            // Check if element is already in viewport
            const rect = el.getBoundingClientRect();
            const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
            if (isVisible) {
                el.classList.add('reveal');
            } else {
                io.observe(el);
            }
        });
    });
})();
</script>
</body>
</html>